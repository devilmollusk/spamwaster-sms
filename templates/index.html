<!doctype html>
<html>
  <head>
    <title>Log Stream</title>
    <style>
      body {
        font-family: monospace;
      }
      #log {
        white-space: pre-wrap; /* Preserve formatting and line breaks */
        overflow-y: auto; /* Scrollable area if log is long */
        height: 80vh; /* Adjust height as needed */
      }
    </style>
    <script type="text/javascript">
      function fetchLogs() {
        const eventSource = new EventSource("/stream");
        eventSource.onmessage = function(event) {
          const log = document.getElementById("log");
          log.innerHTML += event.data; // Append new data to existing content
          log.scrollTop = log.scrollHeight; // Scroll to the bottom
        };
      }

      document.addEventListener("DOMContentLoaded", function() {
        // Initialize the log content
        const log = document.getElementById("log");

        // Start fetching logs after initial content is loaded
        log.scrollTop = log.scrollHeight; // Scroll to the bottom on initial load
        fetchLogs();
      });
    </script>
  </head>
  <body>
    <h1>Log Stream</h1>
    <div id="log">{{ initial_content | safe }}</div>
  </body>
</html>
