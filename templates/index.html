<!doctype html>
<html>
  <head>
    <title>Log Stream</title>
    <style>
      body {
        font-family: monospace;
      }
      #log {
        white-space: pre-wrap; /* Preserve formatting and line breaks */
      }
    </style>
    <script type="text/javascript">
      function fetchLogs() {
        const eventSource = new EventSource("/stream");
        eventSource.onmessage = function(event) {
          const log = document.getElementById("log");
          log.innerHTML += event.data; // Append new data to existing content
          log.scrollTop = log.scrollHeight; // Scroll to the bottom
        };
      }

      document.addEventListener("DOMContentLoaded", function() {
        // Set initial content
        const initialContent = document.getElementById("log").innerHTML;
        const log = document.getElementById("log");
        log.innerHTML = initialContent;

        fetchLogs(); // Start fetching logs after initial content is loaded
      });
    </script>
  </head>
  <body>
    <h1>Log Stream</h1>
    <div id="log">{{ initial_content | safe }}</div>
  </body>
</html>
